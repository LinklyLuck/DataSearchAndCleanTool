{
  "_meta": {
    "version": 2,
    "note": "Domain templates for feature bootstrapping. Each domain has one or more feature_sets. The pipeline will pick the first matching set (or merge by need)."
  },

  "movie": {
    "keywords": ["movie", "film", "cinema", "box office", "imdb", "director", "actor", "runtime", "budget"],
    "feature_sets": [
      [
        "target_revenue",
        "movie_title",
        "director_name",
        "release_year",
        "genre",
        "budget_usd",
        "revenue_usd",
        "runtime_minutes",
        "country_code",
        "imdb_rating"
      ],
      [
        "target_rating",
        "movie_title",
        "release_year",
        "director_name",
        "genre",
        "runtime_minutes",
        "production_budget",
        "box_office_revenue",
        "language",
        "number_of_reviews"
      ],
      [
        "target_runtime",
        "movie_title",
        "release_year",
        "genre",
        "director_name",
        "budget_usd",
        "box_office_revenue",
        "country_code",
        "imdb_rating",
        "cast_count"
      ]
    ],
    "join_keys": ["movie_title", "director_name", "release_year"],
    "canonical_order": ["movie_title", "director_name", "release_year", "genre", "budget_usd", "revenue_usd", "runtime_minutes", "country_code", "imdb_rating"],
    "policy": {
      "strong_keys": ["movie_title", "director_name"],
      "join_min_keys": 2,
      "same_origin": true,
      "source_priority": [".csv", ".ndjson", ".jsonl", ".json"],
      "max_blowup_ratio": 1.8,
      "alias_rules": {
        "^(title|film_title|name|movie)$": "movie_title",
        "^(director|director_name|dir_name)$": "director_name",
        "^(year|release_year|pub_year)$": "release_year",
        "^(genre|category)$": "genre",
        "^(budget|budget_usd|production_budget)$": "budget_usd",
        "^(box_office|revenue|revenue_usd)$": "revenue_usd",
        "^(runtime|min|duration|runtime_minutes)$": "runtime_minutes",
        "^(imdb|imdb_rating|rating)$": "imdb_rating",
        "^(country|country_code|locale)$": "country_code"
      }
    }
  },



  "stock": {
    "keywords": ["stock", "equity", "ticker", "ohlc", "close price", "volume", "exchange"],
    "feature_sets": [
      [
        "target_close_price",
        "ticker",
        "date",
        "open_price",
        "high_price",
        "low_price",
        "close_price",
        "volume",
        "adjusted_close",
        "exchange"
      ],
      [
        "target_return",
        "ticker",
        "date",
        "close_price",
        "prev_close_price",
        "rolling_mean_5",
        "rolling_std_20",
        "volume",
        "market_cap",
        "sector"
      ]
    ],
    "join_keys": ["ticker", "date"],
    "canonical_order": ["ticker", "date", "open_price", "high_price", "low_price", "close_price", "adjusted_close", "volume", "exchange"],
    "policy": {
      "strong_keys": ["ticker"],
      "join_min_keys": 2,
      "same_origin": true,
      "source_priority": [".csv", ".ndjson", ".jsonl", ".json"],
      "max_blowup_ratio": 1.8,
      "alias_rules": {
        "^(ticker|symbol)$": "ticker",
        "^(date|trading_date)$": "date",
        "^(open|open_price)$": "open_price",
        "^(high|high_price)$": "high_price",
        "^(low|low_price)$": "low_price",
        "^(close|close_price)$": "close_price",
        "^(adj_close|adjusted_close)$": "adjusted_close",
        "^(vol|volume)$": "volume",
        "^(exch|exchange)$": "exchange"
      }
    }
  },

  "ecommerce": {
    "keywords": ["ecommerce", "product", "orders", "transactions", "sku", "category", "customer", "basket", "cart"],
    "feature_sets": [
      [
        "target_gmv",
        "order_id",
        "order_date",
        "product_id",
        "sku",
        "category",
        "price",
        "quantity",
        "discount",
        "customer_id"
      ],
      [
        "target_repeat_purchase",
        "customer_id",
        "first_order_date",
        "last_order_date",
        "orders_count",
        "total_spend",
        "avg_basket",
        "geo_country",
        "acquisition_channel",
        "device_type"
      ]
    ],
    "join_keys": ["order_id", "product_id", "customer_id"],
    "canonical_order": ["order_id", "order_date", "product_id", "sku", "category", "price", "quantity", "discount", "customer_id"],
    "policy": {
      "strong_keys": ["order_id", "product_id", "customer_id"],
      "join_min_keys": 2,
      "same_origin": true,
      "source_priority": [".csv", ".ndjson", ".jsonl", ".json"],
      "max_blowup_ratio": 1.8,
      "alias_rules": {
        "^(order_id|oid)$": "order_id",
        "^(order_date|date)$": "order_date",
        "^(product_id|pid)$": "product_id",
        "^(sku)$": "sku",
        "^(category|cat)$": "category",
        "^(price|unit_price)$": "price",
        "^(qty|quantity)$": "quantity",
        "^(discount|promo)$": "discount",
        "^(customer_id|cid|user_id)$": "customer_id"
      }
    }
  },



  "fallback": {
    "keywords": [],
    "feature_sets": [
      [
        "target_variable",
        "entity_name",
        "entity_id",
        "date",
        "category",
        "numeric_feature_1",
        "numeric_feature_2",
        "numeric_feature_3",
        "text_feature",
        "label_or_score"
      ]
    ],
    "join_keys": ["entity_id", "entity_name", "date"],
    "canonical_order": ["entity_name", "entity_id", "date", "category", "numeric_feature_1", "numeric_feature_2", "numeric_feature_3", "text_feature", "label_or_score"],
    "policy": {
      "strong_keys": ["entity_id", "entity_name"],
      "join_min_keys": 2,
      "same_origin": true,
      "source_priority": [".csv", ".ndjson", ".jsonl", ".json"],
      "max_blowup_ratio": 1.8,
      "alias_rules": {
        "^(name|entity|title)$": "entity_name",
        "^(id|entity_id|code)$": "entity_id",
        "^(date|dt)$": "date"
      }
    }
  }
}
